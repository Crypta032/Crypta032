<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Crypta 032 — Fase 2</title>
<style>
  *{box-sizing:border-box;margin:0;padding:0}
  body{background:#000;color:#bdbdbd;font-family:'Courier New',monospace;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center}
  h1{font-size:2rem;letter-spacing:1px;text-shadow:0 0 14px #000;margin-bottom:18px}
  input{margin-top:10px;background:transparent;border:none;border-bottom:1px solid #444;color:#bdbdbd;font-size:1.1rem;padding:8px;text-align:center;width:220px;outline:none}
  #voz{margin-top:14px;color:#666;opacity:0;transition:opacity .5s;font-style:italic}
  audio{display:none}
</style>
</head>
<body>
  <h1>Qual o animal que tem irmãos construtores?</h1>
  <input id="resposta" placeholder="..." autocomplete="off">
  <div id="voz">[voz distante] :/</div>

  <audio id="musica" loop>
    <source src="misterio.mp3" type="audio/mpeg">
  </audio>
  <audio id="acerto">
    <source src="acerto.mp3" type="audio/mpeg">
  </audio>

<script>
  const musica = document.getElementById('musica');
  const acerto = document.getElementById('acerto');
  const voz = document.getElementById('voz');
  let tentativas = 0;
  const correta = 'porco';
  const input = document.getElementById('resposta');

  musica.play().catch(()=>{});
  function garantirAudioUserGesture() {
    musica.play().catch(()=>{});
    document.removeEventListener('click', garantirAudioUserGesture);
    document.removeEventListener('keydown', garantirAudioUserGesture);
  }
  document.addEventListener('click', garantirAudioUserGesture);
  document.addEventListener('keydown', garantirAudioUserGesture);

  input.addEventListener('keyup', (e)=>{
    if(e.key !== 'Enter') return;
    const val = input.value.trim().toLowerCase();
    if(val === correta){
      try{ acerto.play(); }catch(e){}
      document.body.style.transition = 'opacity 1.4s ease';
      document.body.style.opacity = 0;
      setTimeout(()=> location.href = 'fase3.html', 1400);
    } else {
      tentativas++;
      input.value = '';
      if(tentativas >= 3) voz.style.opacity = 1;
    }
  });
</script>
</body>
</html>
